{% extends 'base.html' %}

{% load static %}

{% block title %}{{court.name}}{% endblock %}

{% block stylesheet %}
<style type="text/css">
	.mainImage {
		width: 100%;
		height: auto;
		max-height: 400px;
	}
	.miniImage {
		width: 105px;
		height: 55px;
		opacity: 0.6;
	}
	.miniImage:hover {
		cursor: pointer;
	}
</style>
{% endblock %}

{% block content %}
<div class="container">
	<div class="row mt-5">
		<div class="col-sm-12 col-md-8">		
			{% with court.photos.all|first as photo %}
				<img class="mainImage" src="{{photo.photo.url}}" alt="Main image" id="mainImage">
			{% endwith %}
			
			{% for photo in photos %}
				<img class="miniImage mt-1" src="{{photo.photo.url}}" alt="Mini image">	
			{% endfor %}									
		</div>
		<div class="col-sm-12 col-md-4">
			<h4>{{court.name}}</h4>
			<table class="table table-striped">
				<tr>
					<td>Address:</td>
					<td>{{court.address.city}}, {{court.address.district}}, {{court.address}}</td>
				</tr>
				<tr>
					<td>Phone number:</td>
					<td>{{court.phone_number}}</td>
				</tr>
				<tr>
					<td>Price:</td>
					<td>{{court.price}}</td>
				</tr>
				<tr>
					<td>Start date:</td>
					<td>{{court.created_at|date}}</td>
				</tr>
				<tr>
					<td>Rating:</td>
					<td>{{court.rating}}</td>
				</tr>
				<tr>
					<td>Likes:</td>
					<td>{{court.like}}</td>
				</tr>	
			</table>
		</div>
	</div>	
	<div class="card mt-4">
		<div class="card-header">Time selection</div>
		<div class="card-body">
			Today: {{today|date:"D, d, N, Y"}}
			<form method="post" enctype="multipart/form-data" novalidate>
				{% csrf_token %}
				<table class="table">
					{% for start, end in times.items %}
					<tr>
						<td>{{start}} - {{end}}</td>	
						{% for o in order %}
							{% if o.start_time == start and o.end_time == end %}
								{% if o.left_court %}
									{% if o.right_court %}
										
									{% else %}
										
									{% endif %}
								{% else %}
									{% if o.right_court %}
										
									{% endif %}
								{% endif %}
							{% endif %}
						{% endfor %}		

						<td>
							<div class="custom-control custom-radio">
								<input type="radio" class="custom-control-input" id="left" name="left" value="left">
								<label class="custom-control-label ml-5" for="left">Left</label>
							</div>
						</td>
						<td>
							<div class="custom-control custom-radio">
								<input type="radio" class="custom-control-input" id="right" name="right" value="right">
								<label class="custom-control-label ml-5" for="right">Right</label>
							</div>
						</td>
						<td>
							<div class="custom-control custom-radio">
								<input type="radio" class="custom-control-input" id="full" name="full" value="full">
								<label class="custom-control-label ml-5" for="full">Full</label>
							</div>
						</td>
					</tr>
					{% endfor %}
				</table>
				<!--
				{% for time in times %}				
				<div class="custom-control custom-radio">	
					<strong>{{time}}</strong>								
					<input type="radio" class="custom-control-input" id="{{time}}" name="time" value="{{time}}">
					<label class="custom-control-label ml-5" for="{{time}}">Half</label>
				</div>
				{% endfor %}
				-->
				<button type="submit" class="btn btn-primary">Order</button>		
			</form>
		</div>
	</div>
</div>
{% endblock %}

{% block script %}
	<script type="text/javascript">
		var images = document.getElementsByClassName("miniImage");
		for(var i = 0; i < images.length; i++) {
			images[i].addEventListener("click", function(){
				var src = this.getAttribute("src");
				document.getElementById("mainImage").src = src;
			});
		}
	</script>
{% endblock %}